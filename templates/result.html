<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Result - Prime Sprint</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .combo-info { margin-top: 20px; font-size: 1.3em; }
        .streak { color: #ff6f00; font-weight: bold; font-size: 1.5em; }
        
        .score-info { margin-top: 20px; font-size: 1.2em; }
        .current-score { font-size: 1.3em; font-weight: bold; color: #007bff; }
        .total-score { font-size: 1.5em; font-weight: bold; color: #1a3b5d; margin-top: 10px; }
        
        .navigation-buttons { 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
            margin-top: 30px; 
        }
        
        .ta-progress-result { 
            font-size: 1.1em; 
            color: #17a2b8; 
            margin-top: 10px; 
        }

        /* â˜… ã‚¹ãƒãƒ›å¯¾å¿œ (è¿½åŠ ) */
        @media (max-width: 500px) {
            .navigation-buttons {
                flex-direction: column; /* ç¸¦ä¸¦ã³ã«ã™ã‚‹ */
                align-items: center;  
                gap: 15px; 
            }
            
            .next-link, .back-link {
                width: 80%; 
                box-sizing: border-box; 
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        {% if is_correct %}
            <h1 class="result-title correct">ğŸ‰ æ­£è§£ï¼ ğŸ‰</h1>
        {% else %}
            <h1 class="result-title wrong">ğŸ˜¢ ä¸æ­£è§£... ğŸ˜¢</h1>
        {% endif %}

        <div class="result-box">
            <h2>å•é¡Œ: {{ number }}</h2>
            <div class="time">
                ã‚¿ã‚¤ãƒ : {{ "%.2f"|format(time_taken) }} ç§’
            </div>
            <div class="factors"> 
                {{ factor_str }}
            </div>
        </div>

        <div class="combo-info">
            <div class="streak">
                 {{ streak }} COMBO!
                <span style="color: #dc3545; font-size: 0.8em;">{{ bonus }}</span>
            </div>
        </div>

        <div class="score-info">
            <div class="current-score">
                ç²å¾—ã‚¹ã‚³ã‚¢: 
                {% if score >= 0 %}
                    +{{ score }}
                {% else %}
                    {{ score }}
                {% endif %}
            </div>
            <div class="total-score">
                ç´¯è¨ˆã‚¹ã‚³ã‚¢: {{ total_score }}
            </div>
        </div>

        {% if mode == 'time_attack' and not is_ta_complete %}
            <div class="ta-progress-result">
                (æ¬¡ã®å•é¡Œ: {{ question_count }} / {{ total_questions }})
            </div>
        {% endif %}

        <div class="navigation-buttons">
            <a href="/" class="back-link">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
            
            {% if is_ta_complete %}
                <a href="/ta_complete" class="next-link">çµæœã‚’è¦‹ã‚‹</a>
            {% elif is_time_up %}
                <a href="/game_over" class="next-link">çµæœã‚’è¦‹ã‚‹</a>
            {% else %}
                <a href="/question" class="next-link">æ¬¡ã®å•é¡Œã¸</a>
            {% endif %}
        </div>
    </div>
</body>
</html>